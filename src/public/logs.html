<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <script src="/socket.io/socket.io.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Worker Logs</title>
    <link rel="stylesheet" href="/style/style.css">
</head>

<body>
    <h1 id="title">Worker Logs</h1>
    <div id="logs" class="worker-logs">Loading logs...</div>

    <script>
        const socket = io();
        const pathParts = window.location.pathname.split("/");
        const workerId = pathParts[2];
        document.title = `Worker ${workerId} Logs`;
        document.getElementById("title").textContent = `ðŸ“œ Worker ${workerId} Logs`;
        socket.emit("watchWorkerLogs", workerId);
        socket.on("workerLogs", ({ logs }) => {
            try {
                const logsContent = logs.join("\n");
                document.getElementById("logs").textContent = logsContent || "(no logs yet)";
            } catch (e) {
                document.getElementById("logs").textContent = `Error fetching logs: ${e}`;
            }
        });
    </script>
</body>

</html>